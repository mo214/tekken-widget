import"../chunks/DsnmJJEf.js";import{i as K}from"../chunks/CSAjYYxs.js";import{o as O,s as g,e as E}from"../chunks/D_lfHUOF.js";import{l as Q,m as k,n as e,o as l,q as r,t as V,u as t,v as L,w as v,x as D,y as _,z as u,A as F}from"../chunks/B3auK2hL.js";import{i as T}from"../chunks/B5sbPd06.js";var W=k("<p>Loading rank data...</p>"),X=k('<p style="color: red;"> </p> <button class="svelte-184mbe7">Try Again</button>',1),Y=k('<div class="rank-card svelte-184mbe7"><h2>Current Rank</h2> <p class="rank svelte-184mbe7"> </p> <p class="prowess svelte-184mbe7"> </p> <p class="last-updated svelte-184mbe7"> </p></div> <button class="svelte-184mbe7">Refresh</button>',1),Z=k('<p>No rank data available</p> <button class="svelte-184mbe7">Fetch Rank</button>',1),$=k("<h1>Tekken Rank Tracker</h1> <!>",1);function oa(S,j){Q(j,!1);let s=L({}),h=L(!1),i=L(null);async function d(){v(h,!0),v(i,null);try{const a=await fetch("/api/rank");if(!a.ok)throw new Error(`Failed to fetch rank: ${a.status}`);v(s,await a.json())}catch(a){a instanceof Error?v(i,a.message):v(i,String(a)),console.error("Error fetching rank:",a)}finally{v(h,!1)}}O(()=>{d()}),K();var U=$(),q=e(l(U),2);{var z=a=>{var b=W();r(a,b)},C=a=>{var b=D(),M=l(b);{var N=o=>{var p=X(),c=l(p),w=_(c);u(c);var x=e(c,2);F(()=>g(w,`Error: ${t(i)??""}`)),E("click",x,d),r(o,p)},P=o=>{var p=D(),c=l(p);{var w=n=>{var f=Y(),m=l(f),y=e(_(m),2),B=_(y,!0);u(y);var R=e(y,2),G=_(R);u(R);var A=e(R,2),H=_(A);u(A),u(m);var I=e(m,2);F(J=>{g(B,t(s).rank),g(G,`Prowess: ${t(s).prowess??""}`),g(H,`Last updated: ${J??""}`)},[()=>t(s).lastUpdated?new Date(t(s).lastUpdated).toLocaleString():"Unknown"]),E("click",I,d),r(n,f)},x=n=>{var f=Z(),m=e(l(f),2);E("click",m,d),r(n,f)};T(c,n=>{t(s)?n(w):n(x,!1)},!0)}r(o,p)};T(M,o=>{t(i)?o(N):o(P,!1)},!0)}r(a,b)};T(q,a=>{t(h)?a(z):a(C,!1)})}r(S,U),V()}export{oa as component};
