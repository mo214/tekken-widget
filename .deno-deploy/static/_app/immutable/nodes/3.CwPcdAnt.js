import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as vr,s as v}from"../chunks/CW4loO8v.js";import{h as $,G as lr,C as _,y as dr,B as l,I as cr,J as t,t as e,M as A,K as s,O as k,x as L,z as j,D as I,L as o}from"../chunks/Dk9nPTzg.js";import{i as B}from"../chunks/ClHLXQE0.js";import{i as fr}from"../chunks/Du7AnmoC.js";function yr(n,d){return n==null?null:String(n)}function ur(n,d,a,u){var c=n.__style;if($||c!==d){var p=yr(d);(!$||p!==n.getAttribute("style"))&&(p==null?n.removeAttribute("style"):n.style.cssText=p),n.__style=d}return u}var pr=_(`<style>:global(body) {
      margin: 0;
      padding: 0;
      background: transparent;
      font-family: 'Arial', sans-serif;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }</style>`),kr=_('<div class="loading svelte-o4y2yf">Loading rank data...</div>'),_r=_('<div class="error svelte-o4y2yf"> </div>'),gr=_('<div class="widget-content svelte-o4y2yf"><div class="current-rank svelte-o4y2yf"><h2 class="svelte-o4y2yf"> </h2> <div class="prowess svelte-o4y2yf"> </div></div> <div class="progress-container svelte-o4y2yf"><div class="progress-header svelte-o4y2yf"><span></span> <span> </span></div> <div class="progress-bar svelte-o4y2yf"><div class="progress-fill svelte-o4y2yf"></div></div> <div class="progress-labels svelte-o4y2yf"><span> </span> <span></span></div> <div class="next-rank svelte-o4y2yf"> </div></div> <div class="last-updated svelte-o4y2yf"> </div></div>'),mr=_('<div class="twitch-widget svelte-o4y2yf"><!></div>');function Dr(n,d){lr(d,!1);let a=A(null),u=A(!0),c=A(null);const p=25;async function C(){try{k(u,!0);const r=await fetch("/api/rank");if(!r.ok)throw new Error("Failed to fetch rank data");k(a,await r.json()),k(c,null)}catch(r){k(c,r instanceof Error?r.message:"Unknown error"),console.error("Error fetching rank:",r)}finally{k(u,!1)}}function G(){if(!e(a)||e(a).rankNumber===-1)return 0;const i=e(a).rankNumber/p*100;return Math.min(Math.max(i,0),100)}function P(){if(!e(a)||e(a).rankNumber===-1)return"Unknown";const r=e(a).rankNumber+1;return{0:"Beginner",1:"1st Dan",2:"2nd Dan",3:"Fighter",4:"Strategist",5:"Combatant",6:"Brawler",7:"Ranger",8:"Cavalry",9:"Warrior",10:"Assailant",11:"Dominator",12:"Vanquisher",13:"Destroyer",14:"Eliminator",15:"Garyu",16:"Shinryu",17:"Tenryu",18:"Mighty Ruler",19:"Flame Ruler",20:"Battle Ruler",21:"Fujin",22:"Raijin",23:"Kishin",24:"Bushin",25:"Tekken King",26:"Tekken Emperor",27:"Tekken God",28:"Tekken God Supreme",100:"God of Destruction"}[r]||"Unknown"}vr(()=>{C();const r=setInterval(C,300*1e3);return()=>clearInterval(r)}),fr();var g=mr();dr(r=>{var i=pr();l(r,i)});var H=t(g);{var O=r=>{var i=kr();l(r,i)},q=r=>{var i=L(),z=j(i);{var J=f=>{var y=_r(),m=t(y);s(y),I(()=>v(m,`Error: ${e(c)??""}`)),l(f,y)},V=f=>{var y=L(),m=j(y);{var W=h=>{var x=gr(),b=t(x),w=t(b),Q=t(w);s(w);var K=o(w,2),X=t(K);s(K),s(b);var R=o(b,2),N=t(R),M=t(N);M.textContent="Progress to Tekken King";var U=o(M,2),Y=t(U);s(U),s(N);var D=o(N,2),Z=t(D);s(D);var T=o(D,2),E=t(T),rr=t(E);s(E);var er=o(E,2);er.textContent="Tekken King (25)",s(T);var F=o(T,2),ar=t(F);s(F),s(R);var S=o(R,2),tr=t(S);s(S),s(x),I((sr,nr,ir,or)=>{v(Q,`Current Rank: ${e(a).rank??""}`),v(X,`Prowess: ${e(a).prowess??""}`),v(Y,`${sr??""}%`),ur(Z,nr),v(rr,`${e(a).rank??""} (${e(a).rankNumber??""})`),v(ar,`Next: ${ir??""}`),v(tr,`Updated: ${or??""}`)},[()=>G().toFixed(1),()=>`width: ${G()}%`,P,()=>new Date(e(a).lastUpdated).toLocaleTimeString()]),l(h,x)};B(m,h=>{e(a)&&h(W)},!0)}l(f,y)};B(z,f=>{e(c)?f(J):f(V,!1)},!0)}l(r,i)};B(H,r=>{e(u)?r(O):r(q,!1)})}s(g),l(n,g),cr()}export{Dr as component};
