import"../chunks/DsnmJJEf.js";import{i as vr}from"../chunks/CSAjYYxs.js";import{o as lr,s as v}from"../chunks/D_lfHUOF.js";import{h as $,l as dr,m as _,M as cr,q as l,t as fr,y as t,u as e,v as E,z as s,w as k,x as j,o as L,A as P,n as o}from"../chunks/B3auK2hL.js";import{i as M}from"../chunks/B5sbPd06.js";function yr(n,d){return n==null?null:String(n)}function ur(n,d,a,u){var c=n.__style;if($||c!==d){var p=yr(d);(!$||p!==n.getAttribute("style"))&&(p==null?n.removeAttribute("style"):n.style.cssText=p),n.__style=d}return u}var pr=_(`<style>:global(body) {
      margin: 0;
      padding: 0;
      background: transparent;
      font-family: 'Arial', sans-serif;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }</style>`),kr=_('<div class="loading svelte-o4y2yf">Loading rank data...</div>'),_r=_('<div class="error svelte-o4y2yf"> </div>'),gr=_('<div class="widget-content svelte-o4y2yf"><div class="current-rank svelte-o4y2yf"><h2 class="svelte-o4y2yf"> </h2> <div class="prowess svelte-o4y2yf"> </div></div> <div class="progress-container svelte-o4y2yf"><div class="progress-header svelte-o4y2yf"><span></span> <span> </span></div> <div class="progress-bar svelte-o4y2yf"><div class="progress-fill svelte-o4y2yf"></div></div> <div class="progress-labels svelte-o4y2yf"><span> </span> <span></span></div> <div class="next-rank svelte-o4y2yf"> </div></div> <div class="last-updated svelte-o4y2yf"> </div></div>'),mr=_('<div class="twitch-widget svelte-o4y2yf"><!></div>');function Nr(n,d){dr(d,!1);let a=E(null),u=E(!0),c=E(null);const p=25;async function U(){try{k(u,!0);const r=await fetch("/api/rank");if(!r.ok)throw new Error("Failed to fetch rank data");k(a,await r.json()),k(c,null)}catch(r){k(c,r instanceof Error?r.message:"Unknown error"),console.error("Error fetching rank:",r)}finally{k(u,!1)}}function B(){if(!e(a)||e(a).rankNumber===-1)return 0;const i=e(a).rankNumber/p*100;return Math.min(Math.max(i,0),100)}function q(){if(!e(a)||e(a).rankNumber===-1)return"Unknown";const r=e(a).rankNumber+1;return{0:"Beginner",1:"1st Dan",2:"2nd Dan",3:"Fighter",4:"Strategist",5:"Combatant",6:"Brawler",7:"Ranger",8:"Cavalry",9:"Warrior",10:"Assailant",11:"Dominator",12:"Vanquisher",13:"Destroyer",14:"Eliminator",15:"Garyu",16:"Shinryu",17:"Tenryu",18:"Mighty Ruler",19:"Flame Ruler",20:"Battle Ruler",21:"Fujin",22:"Raijin",23:"Kishin",24:"Bushin",25:"Tekken King",26:"Tekken Emperor",27:"Tekken God",28:"Tekken God Supreme",100:"God of Destruction"}[r]||"Unknown"}lr(()=>{U();const r=setInterval(U,300*1e3);return()=>clearInterval(r)}),vr();var g=mr();cr(r=>{var i=pr();l(r,i)});var H=t(g);{var I=r=>{var i=kr();l(r,i)},z=r=>{var i=j(),O=L(i);{var V=f=>{var y=_r(),m=t(y);s(y),P(()=>v(m,`Error: ${e(c)??""}`)),l(f,y)},W=f=>{var y=j(),m=L(y);{var J=h=>{var x=gr(),w=t(x),b=t(w),Q=t(b);s(b);var C=o(b,2),X=t(C);s(C),s(w);var R=o(w,2),N=t(R),F=t(N);F.textContent="Progress to Tekken King";var G=o(F,2),Y=t(G);s(G),s(N);var T=o(N,2),Z=t(T);s(T);var D=o(T,2),A=t(D),rr=t(A);s(A);var er=o(A,2);er.textContent="Tekken King (25)",s(D);var K=o(D,2),ar=t(K);s(K),s(R);var S=o(R,2),tr=t(S);s(S),s(x),P((sr,nr,ir,or)=>{v(Q,`Current Rank: ${e(a).rank??""}`),v(X,`Prowess: ${e(a).prowess??""}`),v(Y,`${sr??""}%`),ur(Z,nr),v(rr,`${e(a).rank??""} (${e(a).rankNumber??""})`),v(ar,`Next: ${ir??""}`),v(tr,`Updated: ${or??""}`)},[()=>B().toFixed(1),()=>`width: ${B()}%`,q,()=>new Date(e(a).lastUpdated).toLocaleTimeString()]),l(h,x)};M(m,h=>{e(a)&&h(J)},!0)}l(f,y)};M(O,f=>{e(c)?f(V):f(W,!1)},!0)}l(r,i)};M(H,r=>{e(u)?r(I):r(z,!1)})}s(g),l(n,g),fr()}export{Nr as component};
